@page
@model InvertirOnlineApp.Pages.BonosModel
@{
    ViewData["Title"] = "Bonos";
}

<div class="container mt-5">
    <h1>Visualización de Bonos</h1>
    <p>Revisa las recomendaciones para tomar decisiones informadas.</p>
  
    <div class="row mb-4">
        <div class="col-md-4">
            <select class="form-select" id="filterEstado">
                <option value="all">Todos</option>
                <option value="buy">Comprar</option>
                <option value="hold">Mantener</option>
                <option value="sell">Vender</option>
            </select>
        </div>
        <div class="col-md-4">
            <input type="text" class="form-control" id="search" placeholder="Buscar por nombre o ticker">
        </div>
    </div>
  
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Simbolo</th>
                <th>Cantidad de Compra</th>
                <th>Precio de Compra</th>
                <th>Precio de Venta</th>
                <th>Cantidad de Venta</th>
                <th>Último Precio</th>
                <th>Variación Porcentual</th>
                <th>Apertura</th>
                <th>Máximo</th>
                <th>Mínimo</th>
                <th>Último Cierre</th>
                <th>Volumen</th>
                <th>Cantidad de Operaciones</th>
                <th>Fecha</th>
                <th>Tipo de Opción</th>
                <th>Precio de Ejercicio</th>
                <th>Fecha de Vencimiento</th>
                <th>Mercado</th>
                <th>Moneda</th>
                <th>Descripción</th>
                <th>Plazo</th>
                <th>Lámina Mínima</th>
                <th>Lote</th>
                <th>Estado</th>
            </tr>
        </thead>
        <tbody>
            @if (Model.Bonos != null && Model.Bonos.Count > 0)
            {
                foreach (var bono in Model.Bonos)
                {
                    <tr>
                        <td>@bono.simbolo</td>
                        <td>@(bono.puntas?.cantidadCompra ?? 0)</td>
                        <td>@(bono.puntas?.precioCompra ?? 0)</td>
                        <td>@(bono.puntas?.precioVenta ?? 0)</td>
                        <td>@(bono.puntas?.cantidadVenta ?? 0)</td>
                        <td>@bono.ultimoPrecio</td>
                        <td>@bono.variacionPorcentual</td>
                        <td>@bono.apertura</td>
                        <td>@bono.maximo</td>
                        <td>@bono.minimo</td>
                        <td>@bono.ultimoCierre</td>
                        <td>@bono.volumen</td>
                        <td>@bono.cantidadOperaciones</td>
                        <td>@bono.fecha?.ToString("yyyy-MM-dd HH:mm:ss")</td>
                        <td>@bono.tipoOpcion</td>
                        <td>@bono.precioEjercicio</td>
                        <td>@bono.fechaVencimiento</td>
                        <td>@bono.mercado</td>
                        <td>@bono.moneda</td>
                        <td>@bono.descripcion</td>
                        <td>@bono.plazo</td>
                        <td>@bono.laminaMinima</td>
                        <td>@bono.lote</td>
                        <td>@Model.ClasificarBono(bono)</td>
                    </tr>
                }
            }
        </tbody>
    </table>
</div>